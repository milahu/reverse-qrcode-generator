import{S as Le,i as Te,s as ye,e as o,a as m,t as L,b as h,c as _e,d as k,f as Ie,g as e,h as be,l as U,j as Z,n as we,k as De,r as Re,o as ze,m as Ge,p as Se,q as ge,u as Me,v as Q}from"./vendor.js";const Ae=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const g of n)if(g.type==="childList")for(const v of g.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function t(n){const g={};return n.integrity&&(g.integrity=n.integrity),n.referrerpolicy&&(g.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?g.credentials="include":n.crossorigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(n){if(n.ep)return;n.ep=!0;const g=t(n);fetch(n.href,g)}};Ae();var Ce="./assets/meme-happy-merchant.jpg";function ke(l){let a,t,d,n,g,v,T,N,S,i,ae,_,O,c,j,y,F,B,q,D,x,E,b,oe,K,J,G,V,$,R,M,ee,te,W,ie,P,ne,re,se,ue,A,X,fe,Y,ce,s,r,u,z,f,I,H,C,le,he,pe,ve;return{c(){a=o("main"),t=o("h2"),t.textContent="Reverse QRCode Generator",d=m(),n=o("div"),n.textContent="naive implementation = brute force",g=m(),v=o("div"),T=L("text length = "),N=L(l[15]),S=m(),i=o("input"),ae=m(),_=o("button"),_.textContent="Start Guessing",O=m(),c=o("div"),j=o("div"),y=o("img"),B=m(),q=o("div"),D=o("canvas"),x=m(),E=o("div"),b=o("canvas"),oe=m(),K=o("div"),J=o("canvas"),G=m(),V=o("div"),$=o("canvas"),R=m(),M=o("div"),ee=L(l[9]),te=L(" = "),W=L(l[11]),ie=m(),P=o("div"),ne=L(l[10]),re=L(" = "),se=L(l[12]),ue=m(),A=o("form"),X=o("input"),fe=m(),Y=o("input"),ce=m(),s=o("button"),s.textContent="default image",r=m(),u=o("div"),z=L("done "),f=L(l[8]),I=L(" of "),H=L(me),C=L(" guessing steps"),le=m(),he=o("div"),h(i,"type","range"),h(i,"min",Ee),h(i,"max",qe),h(y,"alt","lol youre blind"),_e(y.src,F=l[2])||h(y,"src",F),h(j,"class","svelte-19mann5"),k(D,"height",l[7]+"px"),k(D,"width",l[7]+"px"),k(D,"image-rendering","pixelated"),h(q,"class","svelte-19mann5"),k(b,"height",l[7]+"px"),k(b,"width",l[7]+"px"),k(b,"image-rendering","pixelated"),h(E,"class","svelte-19mann5"),h(K,"class","svelte-19mann5"),h(V,"class","svelte-19mann5"),h(c,"class","flex-container svelte-19mann5"),h(M,"class","last-text"),h(P,"class","last-text"),h(X,"type","file"),h(Y,"type","submit"),Y.value="upload image",h(he,"class","result-codes"),h(a,"class","svelte-19mann5")},m(p,w){Ie(p,a,w),e(a,t),e(a,d),e(a,n),e(a,g),e(a,v),e(v,T),e(v,N),e(v,S),e(v,i),be(i,l[15]),e(v,ae),e(v,_),l[22](_),e(a,O),e(a,c),e(c,j),e(j,y),l[23](y),e(c,B),e(c,q),e(q,D),l[24](D),e(c,x),e(c,E),e(E,b),l[25](b),e(c,oe),e(c,K),e(K,J),l[26](J),e(c,G),e(c,V),e(V,$),l[27]($),e(a,R),e(a,M),e(M,ee),e(M,te),e(M,W),e(a,ie),e(a,P),e(P,ne),e(P,re),e(P,se),e(a,ue),e(a,A),e(A,X),e(A,fe),e(A,Y),e(A,ce),e(A,s),e(a,r),e(a,u),e(u,z),e(u,f),e(u,I),e(u,H),e(u,C),e(a,le),e(a,he),l[30](he),pe||(ve=[U(i,"change",l[21]),U(i,"input",l[21]),U(i,"change",l[19]),U(_,"click",l[18]),U(y,"load",l[20]),U(X,"change",l[28]),U(s,"click",l[29]),U(A,"submit",l[17])],pe=!0)},p(p,w){w[0]&32768&&Z(N,p[15]),w[0]&32768&&be(i,p[15]),w[0]&4&&!_e(y.src,F=p[2])&&h(y,"src",F),w[0]&128&&k(D,"height",p[7]+"px"),w[0]&128&&k(D,"width",p[7]+"px"),w[0]&128&&k(b,"height",p[7]+"px"),w[0]&128&&k(b,"width",p[7]+"px"),w[0]&512&&Z(ee,p[9]),w[0]&2048&&Z(W,p[11]),w[0]&1024&&Z(ne,p[10]),w[0]&4096&&Z(se,p[12]),w[0]&256&&Z(f,p[8])},i:we,o:we,d(p){p&&De(a),l[22](null),l[23](null),l[24](null),l[25](null),l[26](null),l[27](null),l[30](null),pe=!1,Re(ve)}}}const qe=2331,Ee=1;let me=1e4;function He(l,a){var t=l.data;a*=2.55;for(var d=(255+a)/(255.01-a),n=0;n<t.length;n+=4)t[n]=d*(t[n]-128)+128,t[n+1]=d*(t[n+1]-128)+128,t[n+2]=d*(t[n+2]-128)+128;return l}function de(l){for(var a="",t="    ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=t.length,n=0;n<l;n++)a+=t.charAt(Math.floor(Math.random()*d));return a}function Ne(l,a,t){let d,n,g=Ce;const v=Ce;let T,N,S,i;function ae(s){s.preventDefault();var r=d[0],u=new FileReader;u.onload=function(z){t(2,g=z.target.result)},u.readAsDataURL(r)}let _,O,c=!1,j=[],y=[],F=0,B=null,q=null,D="",x="";function E(s=0){if(c==!1||s>me){console.log(`stop guessing: continueGuessing = ${c}`),console.log(`stop guessing: guessIdx = ${s} of ${me}`),t(14,G.innerHTML="Start Guessing",G),oe();return}for(var r=de(R),u=Se(r),z=u.modules.data,f=0,I=0,H=0;H<K;H++)f=f+(J[I]&1^z[H]),I=I+4;j.push({text:r,diff:f}),f<B?(t(9,B=f),t(11,D=r),ge(T,r,async function(C){C&&console.error(C),setTimeout(()=>{E(s+1)},1)})):f>q?(t(10,q=f),t(12,x=r),ge(N,r,async function(C){C&&console.error(C),setTimeout(()=>{E(s+1)},1)})):(s%100==0&&t(8,F=s),setTimeout(()=>{E(s+1)},1))}let b;function oe(){var s=j.sort((f,I)=>f.diff-I.diff),r=100;y=s.slice(0,r/2).concat(s.slice(-r/2));var u=y.slice();t(13,b.innerHTML="",b);function z(){if(u.length!=0){var f=u.shift(),I=document.createElement("div"),H=document.createElement("div");H.innerHTML=`diff = ${f.diff} + text = ${f.text}`;var C=document.createElement("canvas");C.title=f.text,C.onclick=()=>console.log(`result.text = ${f.text}`),I.appendChild(C),I.appendChild(H),b.appendChild(I),ge(C,f.text,async function(le){le?console.error(le):setTimeout(()=>{z()},10)})}}z()}let K=0,J=null,G;function V(){c=!1}function $(s){if(c)return V();t(14,G.innerHTML="Stop Guessing",G),j=[],c=!0,t(8,F=0),t(9,B=1/0),t(10,q=0);var r=i.getContext("2d"),u=r.getImageData(0,0,i.width,i.height);J=u.data,K=_*_,E()}let R=106,M=R;async function ee(s){te(s.target.valueAsNumber)}async function te(s){console.log(`textSize: ${R} -> ${s}`),R=s,await Ge(),W(de(R)),_=Se(de(R)).modules.size,t(5,S.height=_,S),t(5,S.width=_,S);var r=S.getContext("2d");r.drawImage(n,0,0,_,_),console.log("done canvasImage");var u=r.getImageData(0,0,S.width,S.height);He(u,100),t(6,i.height=_,i),t(6,i.width=_,i);var z=i.getContext("2d");z.putImageData(u,0,0)}setTimeout(()=>{te(R)},200);function W(s){ge(T,s,function(r){r?console.error(r):console.log("success!")}),n.height>n.width?(t(1,n.height=T.height,n),t(7,O=T.height)):(t(1,n.width=T.width,n),t(7,O=T.width))}ze(()=>{t(7,O=n.height),W(de(R))});function ie(s){t(7,O=Math.max(n.height,n.width))}function P(){M=Me(this.value),t(15,M)}function ne(s){Q[s?"unshift":"push"](()=>{G=s,t(14,G)})}function re(s){Q[s?"unshift":"push"](()=>{n=s,t(1,n)})}function se(s){Q[s?"unshift":"push"](()=>{S=s,t(5,S)})}function ue(s){Q[s?"unshift":"push"](()=>{i=s,t(6,i)})}function A(s){Q[s?"unshift":"push"](()=>{T=s,t(3,T)})}function X(s){Q[s?"unshift":"push"](()=>{N=s,t(4,N)})}function fe(){d=this.files,t(0,d)}const Y=()=>{t(1,n.src=v,n)};function ce(s){Q[s?"unshift":"push"](()=>{b=s,t(13,b)})}return[d,n,g,T,N,S,i,O,F,B,q,D,x,b,G,M,v,ae,$,ee,ie,P,ne,re,se,ue,A,X,fe,Y,ce]}class Oe extends Le{constructor(a){super();Te(this,a,Ne,ke,ye,{},null,[-1,-1])}}new Oe({target:document.body,props:{}});
